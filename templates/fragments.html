<!doctype html>
<html>
<head><title>Fragments</title></head>
<body>
<h1>Fragment Browser</h1>

<form method="get">
  <input type="text" name="q" value="{{ query }}" placeholder="Search fragments" size="40" />
  <button type="submit">Search</button>
  {% if query %}<a href="/fragments">Clear</a>{% endif %}
</form>

<form method="post" action="/recombulator">
  <input type="hidden" name="format" value="zip" />

{% if fragments %}
  <ul>
  {% for f in fragments %}
    <li>
      <input type="checkbox" name="fragment_ids" value="{{ f.id }}" />
      <strong>#{{ f.id }}</strong>
      {% if f.source %} â€” <em>{{ f.source }}</em>{% endif %}
      {% if f.source_page %}(page {{ f.source_page }}){% endif %}
      {% if f.source_type %}[{{ f.source_type }}]{% endif %}
      <br/>
      <pre>{{ f.content }}</pre>
    </li>
    <hr/>
  {% endfor %}
  </ul>
{% else %}
  <p>No fragments found.</p>
{% endif %}

  <button type="submit">Export selected as ZIP</button>
</form>

<div>
  {% if page > 1 %}
    <a href="/fragments?page={{ page - 1 }}{% if query %}&q={{ query }}{% endif %}">Previous</a>
  {% endif %}
  <span>Page {{ page }}</span>
  {% if fragments|length == 25 %}
    <a href="/fragments?page={{ page + 1 }}{% if query %}&q={{ query }}{% endif %}">Next</a>
  {% endif %}
</div>

<p><a href="/disassembler">Add fragment</a> | <a href="/">Back to home</a></p>
</body>
</html>